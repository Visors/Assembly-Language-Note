# 4.2 整数的加法和减法指令

## 运算结果标志位

### 进位标志CF(Carry Flag)

进位标志CF主要用来反映运算是否产生进位或借位。如果运算结果的最高位产生了一个进位或借位，那么，其值为1，否则其值为0。

使用该标志位的情况有：多字(字节)数的加减运算，无符号数的大小比较运算，移位操作，字(字节)之间移位，专门改变CF值的指令等。

### 奇偶标志PF(Parity Flag)

奇偶标志PF用于反映运算结果中“1”的个数的奇偶性。如果“1”的个数为偶数，则PF的值为1，否则其值为0。

利用PF可进行奇偶校验检查，或产生奇偶校验位。在数据传送过程中，为了提供传送的可靠性，如果采用奇偶校验的方法，就可使用该标志位。

### 辅助进位标志AF(Auxiliary Carry Flag)

在发生下列情况时，辅助进位标志AF的值被置为1，否则其值为0：

1. 在字操作时，发生低字节向高字节进位或借位时；
2. 在字节操作时，发生低4位向高4位进位或借位时。

对以上6个运算结果标志位，在一般编程情况下，标志位CF、ZF、SF和OF的使用频率较高，而标志位PF和AF的使用频率较低。

### 零标志ZF(Zero Flag)

零标志ZF用来反映运算结果是否为0。如果运算结果为0，则其值为1，否则其值为0。在判断运算结果是否为0时，可使用此标志位。

### 符号标志SF(Sign Flag)

符号标志SF用来反映运算结果的符号位，它与运算结果的最高位相同。在微机系统中，有符号数采用补码表示法，所以，SF也就反映运算结果的正负号。运算结果为正数时，SF的值为0，否则其值为1。

### 溢出标志OF(Overflow Flag)

溢出标志OF用于反映有符号数加减运算所得结果是否溢出。如果运算结果超过当前运算位数所能表示的范围，则称为溢出，OF的值被置为1，否则，OF的值被清为0。

“溢出”和“进位”是两个不同含义的概念，不要混淆。

## 整数加减指令

### INC 和 DEC 指令

INC（增加）和DEC（减少）指令分别表示寄存器或内存操作数加 1 和减 1。语法如下所示：

```assembly
INC reg/mem
DEC reg/mem
```

下面是一些例子：

```assembly
.data
myWord WORD 1000h
.code
inc myWord		; myWord = 1001h
mov bx, myWord
dec bx			; BX = 1000h
```

根据目标操作数的值，溢岀标志位、符号标志位、零标志位、辅助进位标志位、进位标志位和奇偶标志位会发生变化。INC 和 DEC 指令不会影响进位标志位。

### ADD 指令

ADD 指令将长度相同的源操作数和目的操作数进行相加操作。语法如下：

```ADD destination, source```

在操作中，源操作数不能改变，相加之和存放在目的操作数中。该指令可以使用的操作数与 MOV 指令相同。下面是两个 32 位整数相加的短代码示例：

```assembly
.data
var1 DWORD 10000h
var2 DWORD 20000h
.code
mov eax,var1		; EAX = 10000h
add eax,var2		; EAX = 30000h
```

标志位：进位标志位、零标志位、符号标志位、溢出标志位、辅助进位标志位和奇偶标 志位根据存入目标操作数的数值进行变化。

### SUB 指令

SUB 指令从目的操作数中减去源操作数。该指令对操作数的要求与 ADD 和 MOV 指令相同。指令语法如下：

```SUB destination, source```

下面是两个 32 位整数相减的短代码示例：

```assembly
.data
var1 DWORD 30000h
var2 DWORD 10000h
.code
mov eax,var1		; EAX = 30000h
sub eax,var2		; EAX = 20000h
```

标志位：进位标志位、零标志位、符号标志位、溢出标志位、辅助进位标志位和奇偶标 志位根据存入目标操作数的数值进行变化。

### NEG 指令

NEG（非）指令通过把操作数转换为其二进制补码，将操作数的符号取反。下述操作数可以用于该指令：

```assembly
NEG reg
NEG mem
```

> 提示：将目标操作数按位取反再加 1，就可以得到这个数的二进制补码。

标志位：进位标志位CF、零标志位ZF、符号标志位SF、溢出标志位、辅助进位标志位和奇偶标志位根据存入目标操作数的数值进行变化。